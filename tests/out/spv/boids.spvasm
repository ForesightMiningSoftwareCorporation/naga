; SPIR-V
; Version: 1.0
; Generator: rspirv
; Bound: 218
OpCapability Shader
OpExtension "SPV_KHR_storage_buffer_storage_class"
%1 = OpExtInstImport "GLSL.std.450"
OpMemoryModel Logical GLSL450
OpEntryPoint GLCompute %50 "main" %47
OpExecutionMode %50 LocalSize 64 1 1
OpMemberName %6 0 "pos"
OpMemberName %6 1 "vel"
OpName %6 "Particle"
OpMemberName %7 0 "deltaT"
OpMemberName %7 1 "rule1Distance"
OpMemberName %7 2 "rule2Distance"
OpMemberName %7 3 "rule3Distance"
OpMemberName %7 4 "rule1Scale"
OpMemberName %7 5 "rule2Scale"
OpMemberName %7 6 "rule3Scale"
OpName %7 "SimParams"
OpMemberName %9 0 "particles"
OpName %9 "Particles"
OpName %12 "NUM_PARTICLES"
OpName %17 "params"
OpName %20 "particlesSrc"
OpName %22 "particlesDst"
OpName %23 "vPos"
OpName %26 "vVel"
OpName %28 "cMass"
OpName %30 "cVel"
OpName %32 "colVel"
OpName %34 "cMassCount"
OpName %37 "cVelCount"
OpName %39 "pos"
OpName %41 "vel"
OpName %43 "i"
OpName %47 "global_invocation_id"
OpName %50 "main"
OpMemberDecorate %6 0 Offset 0
OpMemberDecorate %6 1 Offset 8
OpMemberDecorate %7 0 Offset 0
OpMemberDecorate %7 1 Offset 4
OpMemberDecorate %7 2 Offset 8
OpMemberDecorate %7 3 Offset 12
OpMemberDecorate %7 4 Offset 16
OpMemberDecorate %7 5 Offset 20
OpMemberDecorate %7 6 Offset 24
OpDecorate %8 ArrayStride 16
OpMemberDecorate %9 0 Offset 0
OpDecorate %17 DescriptorSet 0
OpDecorate %17 Binding 0
OpDecorate %18 Block
OpMemberDecorate %18 0 Offset 0
OpDecorate %20 NonWritable
OpDecorate %20 DescriptorSet 0
OpDecorate %20 Binding 1
OpDecorate %9 Block
OpDecorate %22 DescriptorSet 0
OpDecorate %22 Binding 2
OpDecorate %9 Block
OpDecorate %47 BuiltIn GlobalInvocationId
%2 = OpTypeVoid
%3 = OpTypeInt 32 0
%5 = OpTypeFloat 32
%4 = OpTypeVector %5 2
%6 = OpTypeStruct %4 %4
%7 = OpTypeStruct %5 %5 %5 %5 %5 %5 %5
%8 = OpTypeRuntimeArray %6
%9 = OpTypeStruct %8
%10 = OpTypeVector %3 3
%11 = OpTypeInt 32 1
%12 = OpConstant  %3  1500
%13 = OpConstant  %11  0
%14 = OpConstant  %11  1
%15 = OpConstant  %11  2
%16 = OpConstant  %11  64
%18 = OpTypeStruct %7
%19 = OpTypePointer Uniform %18
%17 = OpVariable  %19  Uniform
%21 = OpTypePointer StorageBuffer %9
%20 = OpVariable  %21  StorageBuffer
%22 = OpVariable  %21  StorageBuffer
%24 = OpTypePointer Function %4
%25 = OpConstantNull  %4
%27 = OpConstantNull  %4
%29 = OpConstantNull  %4
%31 = OpConstantNull  %4
%33 = OpConstantNull  %4
%35 = OpTypePointer Function %11
%36 = OpConstantNull  %11
%38 = OpConstantNull  %11
%40 = OpConstantNull  %4
%42 = OpConstantNull  %4
%44 = OpTypePointer Function %3
%45 = OpConstantNull  %3
%48 = OpTypePointer Input %10
%47 = OpVariable  %48  Input
%51 = OpTypeFunction %2
%52 = OpTypePointer Uniform %7
%53 = OpConstant  %3  0
%55 = OpConstant  %5  0.0
%56 = OpConstant  %3  1
%57 = OpConstant  %5  0.1
%58 = OpConstant  %5  -1.0
%59 = OpConstant  %5  1.0
%62 = OpTypeBool
%66 = OpTypePointer StorageBuffer %8
%67 = OpTypePointer StorageBuffer %6
%68 = OpTypePointer StorageBuffer %4
%97 = OpTypePointer Uniform %5
%111 = OpConstant  %3  2
%125 = OpConstant  %3  3
%160 = OpConstant  %3  4
%166 = OpConstant  %3  5
%172 = OpConstant  %3  6
%189 = OpTypePointer Function %5
%50 = OpFunction  %2  None %51
%46 = OpLabel
%43 = OpVariable  %44  Function %45
%37 = OpVariable  %35  Function %38
%30 = OpVariable  %24  Function %31
%23 = OpVariable  %24  Function %25
%39 = OpVariable  %24  Function %40
%32 = OpVariable  %24  Function %33
%26 = OpVariable  %24  Function %27
%41 = OpVariable  %24  Function %42
%34 = OpVariable  %35  Function %36
%28 = OpVariable  %24  Function %29
%49 = OpLoad  %10  %47
%54 = OpAccessChain  %52  %17 %53
OpBranch %60
%60 = OpLabel
%61 = OpCompositeExtract  %3  %49 0
%63 = OpUGreaterThanEqual  %62  %61 %12
OpSelectionMerge %64 None
OpBranchConditional %63 %65 %64
%65 = OpLabel
OpReturn
%64 = OpLabel
%69 = OpAccessChain  %68  %20 %53 %61 %53
%70 = OpLoad  %4  %69
OpStore %23 %70
%71 = OpAccessChain  %68  %20 %53 %61 %56
%72 = OpLoad  %4  %71
OpStore %26 %72
%73 = OpCompositeConstruct  %4  %55 %55
OpStore %28 %73
%74 = OpCompositeConstruct  %4  %55 %55
OpStore %30 %74
%75 = OpCompositeConstruct  %4  %55 %55
OpStore %32 %75
OpStore %34 %13
OpStore %37 %13
OpStore %43 %53
OpBranch %76
%76 = OpLabel
OpLoopMerge %77 %79 None
OpBranch %78
%78 = OpLabel
%80 = OpLoad  %3  %43
%81 = OpUGreaterThanEqual  %62  %80 %12
OpSelectionMerge %82 None
OpBranchConditional %81 %83 %82
%83 = OpLabel
OpBranch %77
%82 = OpLabel
%84 = OpLoad  %3  %43
%85 = OpIEqual  %62  %84 %61
OpSelectionMerge %86 None
OpBranchConditional %85 %87 %86
%87 = OpLabel
OpBranch %79
%86 = OpLabel
%88 = OpLoad  %3  %43
%89 = OpAccessChain  %68  %20 %53 %88 %53
%90 = OpLoad  %4  %89
OpStore %39 %90
%91 = OpLoad  %3  %43
%92 = OpAccessChain  %68  %20 %53 %91 %56
%93 = OpLoad  %4  %92
OpStore %41 %93
%94 = OpLoad  %4  %39
%95 = OpLoad  %4  %23
%96 = OpExtInst  %5  %1 Distance %94 %95
%98 = OpAccessChain  %97  %54 %56
%99 = OpLoad  %5  %98
%100 = OpFOrdLessThan  %62  %96 %99
OpSelectionMerge %101 None
OpBranchConditional %100 %102 %101
%102 = OpLabel
%103 = OpLoad  %4  %28
%104 = OpLoad  %4  %39
%105 = OpFAdd  %4  %103 %104
OpStore %28 %105
%106 = OpLoad  %11  %34
%107 = OpIAdd  %11  %106 %14
OpStore %34 %107
OpBranch %101
%101 = OpLabel
%108 = OpLoad  %4  %39
%109 = OpLoad  %4  %23
%110 = OpExtInst  %5  %1 Distance %108 %109
%112 = OpAccessChain  %97  %54 %111
%113 = OpLoad  %5  %112
%114 = OpFOrdLessThan  %62  %110 %113
OpSelectionMerge %115 None
OpBranchConditional %114 %116 %115
%116 = OpLabel
%117 = OpLoad  %4  %32
%118 = OpLoad  %4  %39
%119 = OpLoad  %4  %23
%120 = OpFSub  %4  %118 %119
%121 = OpFSub  %4  %117 %120
OpStore %32 %121
OpBranch %115
%115 = OpLabel
%122 = OpLoad  %4  %39
%123 = OpLoad  %4  %23
%124 = OpExtInst  %5  %1 Distance %122 %123
%126 = OpAccessChain  %97  %54 %125
%127 = OpLoad  %5  %126
%128 = OpFOrdLessThan  %62  %124 %127
OpSelectionMerge %129 None
OpBranchConditional %128 %130 %129
%130 = OpLabel
%131 = OpLoad  %4  %30
%132 = OpLoad  %4  %41
%133 = OpFAdd  %4  %131 %132
OpStore %30 %133
%134 = OpLoad  %11  %37
%135 = OpIAdd  %11  %134 %14
OpStore %37 %135
OpBranch %129
%129 = OpLabel
OpBranch %79
%79 = OpLabel
%136 = OpLoad  %3  %43
%137 = OpIAdd  %3  %136 %56
OpStore %43 %137
OpBranch %76
%77 = OpLabel
%138 = OpLoad  %11  %34
%139 = OpSGreaterThan  %62  %138 %13
OpSelectionMerge %140 None
OpBranchConditional %139 %141 %140
%141 = OpLabel
%142 = OpLoad  %4  %28
%143 = OpLoad  %11  %34
%144 = OpConvertSToF  %5  %143
%145 = OpCompositeConstruct  %4  %144 %144
%146 = OpFDiv  %4  %142 %145
%147 = OpLoad  %4  %23
%148 = OpFSub  %4  %146 %147
OpStore %28 %148
OpBranch %140
%140 = OpLabel
%149 = OpLoad  %11  %37
%150 = OpSGreaterThan  %62  %149 %13
OpSelectionMerge %151 None
OpBranchConditional %150 %152 %151
%152 = OpLabel
%153 = OpLoad  %4  %30
%154 = OpLoad  %11  %37
%155 = OpConvertSToF  %5  %154
%156 = OpCompositeConstruct  %4  %155 %155
%157 = OpFDiv  %4  %153 %156
OpStore %30 %157
OpBranch %151
%151 = OpLabel
%158 = OpLoad  %4  %26
%159 = OpLoad  %4  %28
%161 = OpAccessChain  %97  %54 %160
%162 = OpLoad  %5  %161
%163 = OpVectorTimesScalar  %4  %159 %162
%164 = OpFAdd  %4  %158 %163
%165 = OpLoad  %4  %32
%167 = OpAccessChain  %97  %54 %166
%168 = OpLoad  %5  %167
%169 = OpVectorTimesScalar  %4  %165 %168
%170 = OpFAdd  %4  %164 %169
%171 = OpLoad  %4  %30
%173 = OpAccessChain  %97  %54 %172
%174 = OpLoad  %5  %173
%175 = OpVectorTimesScalar  %4  %171 %174
%176 = OpFAdd  %4  %170 %175
OpStore %26 %176
%177 = OpLoad  %4  %26
%178 = OpExtInst  %4  %1 Normalize %177
%179 = OpLoad  %4  %26
%180 = OpExtInst  %5  %1 Length %179
%181 = OpExtInst  %5  %1 FClamp %180 %55 %57
%182 = OpVectorTimesScalar  %4  %178 %181
OpStore %26 %182
%183 = OpLoad  %4  %23
%184 = OpLoad  %4  %26
%185 = OpAccessChain  %97  %54 %53
%186 = OpLoad  %5  %185
%187 = OpVectorTimesScalar  %4  %184 %186
%188 = OpFAdd  %4  %183 %187
OpStore %23 %188
%190 = OpAccessChain  %189  %23 %53
%191 = OpLoad  %5  %190
%192 = OpFOrdLessThan  %62  %191 %58
OpSelectionMerge %193 None
OpBranchConditional %192 %194 %193
%194 = OpLabel
%195 = OpAccessChain  %189  %23 %53
OpStore %195 %59
OpBranch %193
%193 = OpLabel
%196 = OpAccessChain  %189  %23 %53
%197 = OpLoad  %5  %196
%198 = OpFOrdGreaterThan  %62  %197 %59
OpSelectionMerge %199 None
OpBranchConditional %198 %200 %199
%200 = OpLabel
%201 = OpAccessChain  %189  %23 %53
OpStore %201 %58
OpBranch %199
%199 = OpLabel
%202 = OpAccessChain  %189  %23 %56
%203 = OpLoad  %5  %202
%204 = OpFOrdLessThan  %62  %203 %58
OpSelectionMerge %205 None
OpBranchConditional %204 %206 %205
%206 = OpLabel
%207 = OpAccessChain  %189  %23 %56
OpStore %207 %59
OpBranch %205
%205 = OpLabel
%208 = OpAccessChain  %189  %23 %56
%209 = OpLoad  %5  %208
%210 = OpFOrdGreaterThan  %62  %209 %59
OpSelectionMerge %211 None
OpBranchConditional %210 %212 %211
%212 = OpLabel
%213 = OpAccessChain  %189  %23 %56
OpStore %213 %58
OpBranch %211
%211 = OpLabel
%214 = OpLoad  %4  %23
%215 = OpAccessChain  %68  %22 %53 %61 %53
OpStore %215 %214
%216 = OpLoad  %4  %26
%217 = OpAccessChain  %68  %22 %53 %61 %56
OpStore %217 %216
OpReturn
OpFunctionEnd